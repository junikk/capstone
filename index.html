<!DOCTYPE html>

<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>My Voice, My Song - AI ë…¸ë˜ ì»¤ë²„</title>
  <style>


button:disabled {
  background-color: #cccccc !important;
  cursor: not-allowed;
}



.spinner {
  border: 4px solid #f3f3f3;
  border-top: 4px solid #007bff;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  animation: spin 1s linear infinite;
  margin: auto;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

#loading-spinner {
  display: none;
  margin-top: 20px;
  text-align: center;
  font-size: 14px;
  color: #555;
}



#model-voice-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start; /* ìƒë‹¨ ê¸°ì¤€ */
  margin-top: 2px; /* ì•„ì£¼ ë¯¸ì„¸í•˜ê²Œ ì •ë ¬ */
}


.selected-model-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 4px;
}

.voice-sample-label {
  font-size: 12px;
  margin-bottom: 2px;
  color: #555;
  
}


.model-select-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}

#model-voice-btn {
  width: 32px;
  height: 32px;
  padding: 0;
  border: none;
  border-radius: 8px;
  background-color: #007bff;
  color: white;
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 1px; 
}

#model-voice-btn:hover {
  background-color: #0056b3;
}


.sample-select-wrapper select:focus {
  border-color: #007bff;
  outline: none;
}

.sample-select-wrapper {
  display: flex;
  align-items: stretch;  /* âœ… ìš”ì†Œ ë†’ì´ ì •í™•íˆ ë§ì¶¤ */
  gap: 8px;
  margin-bottom: 10px;
  height: 36px;  /* âœ… ì „ì²´ í–‰ ë†’ì´ ê³ ì • */
}

.sample-select-wrapper select {
  flex: 1;
  padding: 6px 12px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 8px;
  height: 100%; /* âœ… wrapper ë†’ì´ì— ë§ì¶¤ */
  box-sizing: border-box;
}



#sample-play-btn {
  width: 36px;
  height: 100%; /* âœ… wrapper ë†’ì´ì— ë§ì¶¤ */
  padding: 0;
  border: none;
  border-radius: 8px;
  background-color: #007bff;
  color: white;
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 1px; 
}



#sample-play-btn:hover {
  background-color: #0056b3;
}

    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      background-color: #f5f5f5;
      display: flex;
    }
    .sidebar {
      width: 200px;
      background-color: #2c3e50;
      color: white;
      height: 100vh;
      padding-top: 40px;
      position: fixed;
    }
    .sidebar h2 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 18px;
    }
    .sidebar a {
      display: block;
      padding: 15px 20px;
      color: white;
      text-decoration: none;
      transition: background-color 0.3s;
    }
    .sidebar a:hover {
      background-color: #1abc9c;
    }
    .brand {
      text-align: center;
      font-size: 15px;
      font-weight: bold;
      color: #ecf0f1;
      margin-bottom: 30px;
      line-height: 1.4;
      opacity: 0.85;
      letter-spacing: 0.5px;
      font-family: 'Segoe UI', sans-serif;
    }
    .main {
      margin-left: 200px;
      padding: 40px;
      flex-grow: 1;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background-color: #ffffff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #333;
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: bold;
      margin-bottom: 10px;  /* âœ… ì´ ì¤„ ì¶”ê°€ */
      
    }
    input[type="file"] {
      width: 100%;
      padding: 8px;
      margin-top: 8px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    button {
      width: 100%;
      padding: 12px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      margin-top: 25px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    #selected-model {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      margin-top: 1px;
    
    }
    .model-img-placeholder img {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      object-fit: cover;
    }
    .dropdown {
      border: 1px solid #ccc;
      border-radius: 8px;
       padding: 10px 14px; /* ê¸°ì¡´ 14pxì—ì„œ ì¤„ì„ */
      cursor: pointer;
      position: relative;
      background-color: #fff;
      font-weight: bold;
       font-size: 14px; /* ê¸€ì í¬ê¸° ì•½ê°„ ì¤„ì„ */
    }
    .dropdown-options {
      display: none;
      position: absolute;
      background-color: #fff;
      width: 100%;
      top: 100%;
      left: 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      z-index: 1000;
      margin-top: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      max-height: 200px;
      overflow-y: auto;
    }
    .model-option {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      transition: background-color 0.2s;
    }
    .model-option:hover {
      background-color: #f0f0f0;
    }
    .model-option img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }
    .model-option p {
      margin: 0;
      font-size: 15px;
    }
    .fixed-option {
      position: sticky;
      bottom: 0;
      background-color: white;
      text-align: center;
      font-weight: bold;
      padding: 12px;
      border-top: 1px solid #ccc;
      cursor: pointer;
    }
    audio {
      margin-top: 20px;
      width: 100%;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      width: 400px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    .close {
      float: right;
      font-size: 24px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <div class="brand">
      <span>ğŸ™ My Voice,<br>My Song</span>
    </div>
    <h2>ë©”ë‰´</h2>
    <a href="ai_cover.html">ğŸ™ AI ì»¤ë²„ ì œì‘</a>
    <a href="ai_learning.html">ğŸ§  AI ìŒì„± í•™ìŠµ</a>
  </div>

  <div class="main">
    <div class="container">
      <h1>AI ë…¸ë˜ ì»¤ë²„</h1>


<label>ğŸ‘¤ AI ìŒìƒ‰ ëª¨ë¸</label>
<div class="model-select-wrapper">
  <div class="dropdown" onclick="toggleDropdown()" style="flex: 1;">
    <div id="selected-model">
      <span class="model-img-placeholder"></span>
      <span class="model-name">AI ëª¨ë¸ ì„ íƒí•˜ê¸°</span>
    </div>
    <div class="dropdown-options" id="dropdown-options"></div>
  </div>

  <!-- âœ… ëª¨ë¸ ì„ íƒ ì‹œë§Œ ë‚˜íƒ€ë‚˜ëŠ” ì‹¤ì œ ìŒì„± ì²­ì·¨ ë²„íŠ¼ -->
  <div class="selected-model-wrapper" id="model-voice-wrapper" style="display: none;">
    <div class="voice-sample-label">ğŸ¤ í•™ìŠµì— ì‚¬ìš©ëœ ì‹¤ì œ ìŒì„±</div>
    <button id="model-voice-btn" onclick="toggleModelVoice()">â–¶</button>
    <audio id="model-voice-audio" style="display: none;"></audio>
  </div>
</div>








<label for="sampleSelect">ğŸ§ ë¯¸ë¦¬ë“£ê¸° ìƒ˜í”Œ ì„ íƒ</label>
<div class="sample-select-wrapper">
  <select id="sampleSelect" onchange="loadSamplePreview(this.value)">
    <option value="">-- ìƒ˜í”Œì„ ì„ íƒí•˜ì„¸ìš” --</option>
    <option value="sample1">1. Super Shy - New Jeans</option>
    <option value="sample2">2. Peaches - Justin Bieber</option>
    <option value="sample3">3. Sugar - Maroon 5</option>
    <option value="sample4">4. Seven - Jungkook</option>
    <option value="sample5">5. Happy - DAY6</option>
    <option value="sample6">6. ë‚´ì´ë¦„ë§‘ìŒ - QWER</option>
  </select>
  <!-- âœ… ì¶”ê°€ëœ ì›ê³¡ ì¬ìƒê¸° -->
    <button id="sample-play-btn" onclick="toggleInlinePlay()" style="display: none;">â–¶</button>
  <audio id="sample-original-inline" style="display: none;"></audio>
  
</div>


<div id="sample-preview" style="margin-top: 15px; display:none;">

<!-- AI ì»¤ë²„ ì œëª© í‘œì‹œ -->
<p id="sample-title" style="font-weight: bold; margin-top: 10px;">ğŸ¤– AI ì»¤ë²„:</p>
<audio id="sample-ai" controls></audio>

</div>








  
  <label for="song">ğŸµ ë…¸ë˜ íŒŒì¼ ì—…ë¡œë“œ</label>
  <input type="file" id="song" name="song" accept="audio/*" onchange="previewSong(event)">
  <audio id="preview-audio" controls style="display:none;"></audio>

  <button id="generate-btn" onclick="uploadSong()">AI ì»¤ë²„ ìƒì„±</button>

<div id="cover-result" style="display:none; margin-top: 30px;">
  <div style="
    background-color: #f9f9f9;
    border: 2px dashed #007bff;
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  ">
  <!-- ëª¨ë¸ ì´ë¯¸ì§€ & ì´ë¦„ -->
<div id="model-info" style="margin-bottom: 16px;">
  <img id="model-result-img" src="" alt="ëª¨ë¸ ì´ë¯¸ì§€" style="
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 8px;
    border: 2px solid #007bff;
  ">
</div>

  <div id="model-result-name" style="
    font-size: 18px;
    font-weight: bold;
    color: #007bff;
  ">ëª¨ë¸ëª… ìŠ¤íƒ€ì¼ë¡œ ì»¤ë²„ê°€ ì™„ì„±ë˜ì—ˆì–´ìš”!</div>


    <audio id="cover-audio" controls style="width: 100%; margin-bottom: 16px;"></audio>

    <a id="download-link" href="#" download style="
      display: inline-block;
      padding: 10px 20px;
      background-color: #28a745;
      color: white;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      font-size: 15px;
      transition: background-color 0.3s;
    ">ğŸ“¥ ì»¤ë²„ê³¡ ë‹¤ìš´ë¡œë“œ</a>

    <div id="processing-time" style="margin-top: 12px; color: #666; font-size: 14px;"></div>
  </div>
</div>



</div>

<div id="loading-spinner">
  <div class="spinner"></div>
  <div style="margin-top: 8px;">AI ì»¤ë²„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...</div>
</div>


  </div>

  <div id="customModelModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeCustomModal()">&times;</span>
      <h2>ë‚´ê°€ ë§Œë“  AI ëª¨ë¸ ì„ íƒ</h2>
      <div id="custom-model-list"></div>
    </div>
  </div>

<script>
  // ì´ê²Œìˆì–´ì•¼í•˜ë‚˜? ì•„ë˜ loadSamplePreviewì—ì„œ í•œë²ˆë§Œ ì •ì˜í•´ì¤˜ë„ë ê²ƒ ê°™ì€ë°?
  const modelFileMap = {
  'ì´ì¤€ìµ': 'junik',
  'ë§ˆì´í´ì­ìŠ¨': 'mj',
  'ë°•ëª…ìˆ˜': 'park',
  'ì§•í¬ìŠ¤': 'jinx',
  'ì•„ì´ìœ ': 'iu',
  'ì¹´ë¦¬ë‚˜': 'karina',
  'ë„ë¡œ':'ralo'
};

  let selectedModel = null;
  const defaultModels = [
    { name: 'ì´ì¤€ìµ', image: 'junik.jpg', sample: 'junik_sample.mp3',original: 'original.mp3', voiceSample: 'junik_voice.mp3' },
    { name: 'ë§ˆì´í´ì­ìŠ¨', image: 'mj.jpg', sample: 'mj_sample.mp3',original: 'original.mp3', voiceSample: 'mj_voice.mp3' },
    { name: 'ë°•ëª…ìˆ˜', image: 'park.jpg', sample: 'park_sample.mp3' ,original: 'original.mp3', voiceSample: 'park_voice.mp3'},
    { name: 'ì§•í¬ìŠ¤', image: 'jinx.jpg', sample: 'jinx_sample.mp3' ,original: 'original.mp3', voiceSample: 'jinx_voice.mp3'},
    { name: 'ì•„ì´ìœ ', image: 'iu.png', sample: 'iu_sample.mp3' ,original: 'original.mp3', voiceSample: 'iu_voice.mp3'},
    { name: 'ì¹´ë¦¬ë‚˜(ë¯¸ì™„ì„±)', image: 'karina.jpg', sample: 'karina_sample.mp3',original: 'original.mp3', voiceSample: 'karina_voice.mp3' },
    { name: 'ë„ë¡œ', image: 'ralo.png', sample: 'ralo_sample.mp3',original: 'original.mp3', voiceSample: 'ralo_voice.mp3' }
  ];
  const customModels = [
    { name: 'ë‚´ëª¨ë¸1', image: 'custom1.jpg' },
    { name: 'ë‚´ëª¨ë¸2', image: 'custom2.jpg' }
  ];

  function toggleDropdown() {
    const options = document.getElementById('dropdown-options');
    options.style.display = options.style.display === 'block' ? 'none' : 'block';
  }


 function selectModel(name, imgPath, samplePath = '', event = null, originalPath = '', voiceSample = '') {
  if (event) event.stopPropagation();
  selectedModel = name;

  // ëª¨ë¸ UI ë°•ìŠ¤ ì—…ë°ì´íŠ¸
  const modelBox = document.getElementById('selected-model');
  modelBox.innerHTML = `
    <span class="model-img-placeholder"><img src="${imgPath}" alt="${name}"></span>
    <span class="model-name">${name} ì„ íƒë¨</span>
  `;

  document.getElementById('dropdown-options').style.display = 'none';
  closeCustomModal();

  // âœ… ì‹¤ì œ ëª©ì†Œë¦¬ ìƒ˜í”Œ ì˜¤ë””ì˜¤ ë° ë²„íŠ¼ ì²˜ë¦¬
  const voiceWrapper = document.getElementById("model-voice-wrapper");
  const voiceBtn = document.getElementById("model-voice-btn");
  const voiceAudio = document.getElementById("model-voice-audio");

  if (voiceSample) {
    voiceAudio.src = `samples/voices/${voiceSample}`;
    voiceAudio.load();
    voiceWrapper.style.display = "flex";
    voiceBtn.textContent = "â–¶";
  } else {
    voiceAudio.src = "";
    voiceWrapper.style.display = "none";
  }

  // âœ… ìƒ˜í”Œ ì„ íƒ ë° ë¯¸ë¦¬ë“£ê¸° ì´ˆê¸°í™”
  document.getElementById("sampleSelect").selectedIndex = 0;

  const inlineOriginal = document.getElementById("sample-original-inline");
  inlineOriginal.pause();
  inlineOriginal.currentTime = 0;
  inlineOriginal.src = "";
  inlineOriginal.style.display = "none";

  const sampleBtn = document.getElementById("sample-play-btn");
  sampleBtn.style.display = "none";
  sampleBtn.textContent = "â–¶";

  const aiPlayer = document.getElementById("sample-ai");
  aiPlayer.pause();
  aiPlayer.currentTime = 0;
  aiPlayer.src = "";

  document.getElementById("sample-preview").style.display = "none";
  document.getElementById("sample-title").innerText = "ğŸ¤– AI ì»¤ë²„:";
}




function toggleModelVoice() {
  const audio = document.getElementById("model-voice-audio");
  const btn = document.getElementById("model-voice-btn");

  if (audio.paused) {
    audio.play();
    btn.textContent = "â¸";
  } else {
    audio.pause();
    btn.textContent = "â–¶";
  }

  audio.onended = () => {
    btn.textContent = "â–¶";
  };
}





 function loadModels() {
  const options = document.getElementById('dropdown-options');
  options.innerHTML = '';

  defaultModels.forEach(model => {
    options.insertAdjacentHTML('beforeend', `
      <div class="model-option" onclick="selectModel(
  '${model.name}',
  '${model.image}',
  '${model.sample}',
  event,
  '${model.original}',
  '${model.voiceSample}'
)"
>
        <img src="${model.image}" alt="${model.name}">
        <p>${model.name}</p>
      </div>
    `);
  });

  options.insertAdjacentHTML('beforeend', `
    <div class="fixed-option" onclick="openCustomModal(); event.stopPropagation();">
      â• ë‚´ê°€ ë§Œë“  ëª¨ë¸ ì„ íƒí•˜ê¸°
    </div>
  `);
}


  function openCustomModal() {
    const modal = document.getElementById('customModelModal');
    const list = document.getElementById('custom-model-list');
    list.innerHTML = '';
    customModels.forEach(model => {
      list.insertAdjacentHTML('beforeend', `
        <div class="model-option" onclick="selectModel('${model.name}', '${model.image}', '')">
          <img src="${model.image}" alt="${model.name}"><p>${model.name}</p>
        </div>
      `);
    });
    modal.style.display = 'flex';
  }

  function closeCustomModal() {
    document.getElementById('customModelModal').style.display = 'none';
  }

  function previewSong(event) {
    const file = event.target.files[0];
    const audio = document.getElementById('preview-audio');
    if (file) {
      const url = URL.createObjectURL(file);
      audio.src = url;
      audio.style.display = 'block';
    }
  }

 
  function uploadSong() {

  
  const fileInput = document.getElementById('song');
  const file = fileInput.files[0];
  const loading = document.getElementById('loading-spinner');
  const button = document.getElementById('generate-btn');  // âœ… ê³ ìœ  ë²„íŠ¼

  if (!selectedModel) {
    alert("ğŸ‘¤ AI ìŒìƒ‰ ëª¨ë¸ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
    return;
  }
  if (!file) {
    alert("ğŸµ ë…¸ë˜ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
    return;
  }

  const startTime = new Date();  // ğŸ”¥ fetch ìš”ì²­ ì „ì— ì •ì˜

  // ë¡œë”© í‘œì‹œ ë° ë²„íŠ¼ ë¹„í™œì„±í™”
  loading.style.display = 'block';
  button.disabled = true;
  button.textContent = "ì²˜ë¦¬ ì¤‘...";

  const formData = new FormData();
  formData.append('file', file);
  formData.append('model', selectedModel);

  // ğŸ‘‰ FormData ë¡œê·¸ ì¶œë ¥ (fetch ì „ì—)
  for (const [key, value] of formData.entries()) {
    console.log(`ğŸ“¦ FormData: ${key} =`, value);
  }

  fetch('http://127.0.0.1:5000/upload', {
    method: 'POST',
    body: formData
  })
  .then(res => {
    if (!res.ok) throw new Error("ì„œë²„ ì‘ë‹µ ì‹¤íŒ¨");
    return res.json();
  })
  .then(data => {
    alert("âœ… ì»¤ë²„ê³¡ ìƒì„± ì™„ë£Œ!\níŒŒì¼ ê²½ë¡œ: " + data.url);

    const audio = document.getElementById("cover-audio");
    const resultBox = document.getElementById("cover-result");

    console.log("ğŸ¯ ì„œë²„ ì‘ë‹µ ë°ì´í„°:", data);  // ğŸ” ë¨¼ì € í™•ì¸
    if (!data || !data.url) {
     throw new Error("ì„œë²„ì—ì„œ URL ì •ë³´ë¥¼ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
    }
    const fileUrl = data.url.replace(/\\/g, '/');

    audio.src = fileUrl;

    // ë‹¤ìš´ë¡œë“œ ë§í¬ ì„¤ì •
    const downloadLink = document.getElementById("download-link");
    downloadLink.href = fileUrl;

    const filenameOnly = fileUrl.split("/").pop();
    downloadLink.setAttribute("download", filenameOnly);


    audio.load();
    resultBox.style.display = "block";

    // ëª¨ë¸ ì´ë¯¸ì§€ ë° ì´ë¦„ ì„¤ì •
    const modelInfoImg = document.getElementById("model-result-img");
    const modelInfoName = document.getElementById("model-result-name");

    // defaultModels ë°°ì—´ì—ì„œ ì„ íƒëœ ëª¨ë¸ ì •ë³´ ì°¾ê¸°
    const model = defaultModels.find(m => m.name === selectedModel);
    if (model) {
      modelInfoImg.src = model.image;
      modelInfoName.innerText = `${model.name} ìŠ¤íƒ€ì¼ë¡œ ì»¤ë²„ê°€ ì™„ì„±ë˜ì—ˆì–´ìš”!`;
    }
    const endTime = new Date();
    const elapsed = ((endTime - startTime) / 1000).toFixed(2);
    document.getElementById("processing-time").innerText = `â± ì²˜ë¦¬ ì‹œê°„: ${elapsed}ì´ˆ`;

  })
  .catch(err => {
    console.error(err);
    alert("âŒ ì˜¤ë¥˜ ë°œìƒ: " + err.message);
  })
  .finally(() => {
    loading.style.display = 'none';
    button.disabled = false;
    button.textContent = "AI ì»¤ë²„ ìƒì„±";  
  });
}



  window.onload = () => {
    loadModels();
  }

  window.onclick = function(e) {
    const dropdown = document.getElementById('dropdown-options');
    const modal = document.getElementById('customModelModal');
    if (!e.target.closest('.dropdown')) {
      dropdown.style.display = 'none';
    }
    if (e.target === modal) {
      modal.style.display = 'none';
    }
  }


function loadSamplePreview(sampleId) {
  const modelFileMap = {
    'ì´ì¤€ìµ': 'junik',
    'ë§ˆì´í´ì­ìŠ¨': 'mj',
    'ë°•ëª…ìˆ˜': 'park',
    'ì§•í¬ìŠ¤': 'jinx',
    'ì•„ì´ìœ ': 'iu',
    'ì¹´ë¦¬ë‚˜': 'karina',
    'ë„ë¡œ':'ralo'
  };

  if (!sampleId || !selectedModel) {
    alert("ğŸ¤ ë¨¼ì € AI ëª¨ë¸ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
    document.getElementById("sample-original-inline").style.display = "none";
    document.getElementById("sample-play-btn").style.display = "none";
    return;
  }

  const modelKey = modelFileMap[selectedModel];
  if (!modelKey) {
    alert("ì„ íƒëœ ëª¨ë¸ì— ëŒ€í•œ ìƒ˜í”Œ ë¯¸ë¦¬ë“£ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.");
    return;
  }

  // ğŸ¯ ìƒ˜í”Œ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
  const select = document.getElementById("sampleSelect");
  const sampleText = select.options[select.selectedIndex].text;

  const originalPath = `samples/${sampleId}_original.mp3`;
  const aiPath = `samples/${sampleId}_${modelKey}.mp3`;

  // ğŸ§ ë¦¬ìŠ¤íŠ¸ ì˜† ì›ê³¡ í”Œë ˆì´ì–´ ì„¤ì •
  const inlinePlayer = document.getElementById("sample-original-inline");
  const playBtn = document.getElementById("sample-play-btn");

  inlinePlayer.src = originalPath;
  inlinePlayer.load();
  inlinePlayer.style.display = "none";
  playBtn.style.display = "inline-block";
  playBtn.textContent = "â–¶";

  // ğŸ”Š AI ì»¤ë²„ ì œëª© ì—…ë°ì´íŠ¸
  document.getElementById("sample-title").innerText = `ğŸ¤– AI ì»¤ë²„ ë¯¸ë¦¬ë“£ê¸° : ${sampleText} - ${selectedModel}(AI)`;

  // ì•„ë˜ ë¹„êµìš© ë¯¸ë¦¬ë“£ê¸° í‘œì‹œ
  document.getElementById("sample-ai").src = aiPath;
  document.getElementById("sample-preview").style.display = "block";
}


function toggleInlinePlay() {
  const audio = document.getElementById("sample-original-inline");
  const btn = document.getElementById("sample-play-btn");

  if (audio.paused) {
    audio.play();
    btn.textContent = "â¸";
  } else {
    audio.pause();
    btn.textContent = "â–¶";
  }

  // ì¬ìƒì´ ëë‚˜ë©´ ë‹¤ì‹œ â–¶ë¡œ ë³µê·€
  audio.onended = () => {
    btn.textContent = "â–¶";
  };
}

function toggleModelVoicePlay() {
  const player = document.getElementById("model-voice-player");
  const btn = document.getElementById("model-play-btn");

  if (player.paused) {
    player.play();
    btn.textContent = "â¸";
  } else {
    player.pause();
    btn.textContent = "â–¶";
  }

  player.onended = () => {
    btn.textContent = "â–¶";
  };
}


</script>

</body>
</html>
